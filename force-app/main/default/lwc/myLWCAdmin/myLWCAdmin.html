<template>
    <!-- Carte contenant le tableau des produits liés à l'opportunité -->
    <lightning-card title="Produits associés à l’opportunité">

        <!-- Affichage si aucune donnée n'est disponible -->
        <template if:true={noData}>
            <div class="slds-p-around_medium slds-text-color_weak">
                <p><strong>Vous n'avez aucune ligne de produits pour le moment.</strong></p>
                <p>1. Veuillez tout d'abord sélectionner un Catalogue (Pricebook)</p>
                <p>2. Sélectionnez ensuite les produits à ajouter</p>
            </div>
        </template>

        <!-- Alerte si quantité > stock disponible -->
        <template if:true={showQuantityWarning}>
            <div class="slds-box slds-theme_alert-texture slds-theme_warning slds-m-bottom_medium">
                <p>
                    Une ou plusieurs lignes de produits dépassent la quantité en stock.
                    Veuillez corriger ces lignes ou contacter votre administrateur système.
                </p>
            </div>
        </template>

        <!-- Affichage du tableau si des données existent -->
        <template if:false={noData}>
            <lightning-datatable
                key-field="Id"
                data={opportunityRows}
                columns={columns}
                onrowaction={handleRowAction}>
            </lightning-datatable>
        </template>

    </lightning-card>
</template>
